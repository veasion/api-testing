(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5edd9cb8"],{"09f4":function(t,e,a){"use strict";a.d(e,"a",(function(){return s})),Math.easeInOutQuad=function(t,e,a,i){return t/=i/2,t<1?a/2*t*t+e:(t--,-a/2*(t*(t-2)-1)+e)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function l(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function n(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(t,e,a){var s=n(),r=t-s,o=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=o;var n=Math.easeInOutQuad(c,s,r,e);l(n),c<e?i(t):a&&"function"===typeof a&&a()};u()}},"24d2":function(t,e,a){"use strict";a.r(e),a.d(e,"listPage",(function(){return l})),a.d(e,"list",(function(){return n})),a.d(e,"getById",(function(){return s})),a.d(e,"update",(function(){return r})),a.d(e,"add",(function(){return o})),a.d(e,"deleted",(function(){return c}));var i=a("b775");function l(t){return Object(i["a"])({url:"/api/project/listPage",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/api/project/list",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/api/project/getById?id="+t,method:"get"})}function r(t){return Object(i["a"])({url:"/api/project/update",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/api/project/add",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/api/project/delete",method:"post",headers:{"Content-Type":"application/json"},data:t})}},"3b6f":function(t,e,a){"use strict";a("48b2")},"48b2":function(t,e,a){},"49a6":function(t,e,a){"use strict";a("bdea")},"591a":function(t,e,a){"use strict";a("8cf7")},"5b39":function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("ac6a"),a("456d"),a("28a5"),a("aef6"),a("f559");function i(t,e,a){if(t&&e&&((null==a||a<0)&&(a=e.length),0!==a)){for(var i=e.substring(0,a),n=e.substring(a),s=!1,r=0,o=a;o>=0;o--){if(" "===i[o]){r=o+1;break}if("{"===i[o]&&o>0&&"$"===i[o-1]){s=!0,r=o+1;break}}var c=i.substring(r,a);if(c.startsWith("http.request('")){var u="";return""===n.trim()?u="')":")"===n.trim()&&(u="'"),l(t.apiNames,c.substring("http.request('".length),u)}if(c.startsWith('http.request("')){var p="";return""===n.trim()?p='")':")"===n.trim()&&(p='"'),l(t.apiNames,c.substring('http.request("'.length),p)}for(var d=c.endsWith("."),h=c.split("."),v=s?t.globalMap:t.varCodes,m=0;m<h.length;m++){var f=null;if((m<h.length-1||d)&&(f=v[h[m]]),!f){var y=Object.keys(v)||[];v=[];for(var b=0;b<y.length;b++){var g="",_=y[b]+"";s&&""===n.trim()&&(g="}"),_.startsWith(h[m])&&_!==h[m]&&v.push({displayText:_,text:_.substring(h[m].length)+g})}return v}v=f}return Object.keys(v)}}function l(t,e,a){if(a=a||"",null==t||0===t.length)return null;var i=[];for(var l in t){var n=t[l];t[l].startsWith(e)&&i.push({displayText:n,text:n.substring(e.length)+a})}return i}},6724:function(t,e,a){"use strict";a("8d41");var i="@@wavesContext";function l(t,e){function a(a){var i=Object.assign({},e.value),l=Object.assign({ele:t,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),n=l.ele;if(n){n.style.position="relative",n.style.overflow="hidden";var s=n.getBoundingClientRect(),r=n.querySelector(".waves-ripple");switch(r?r.className="waves-ripple":(r=document.createElement("span"),r.className="waves-ripple",r.style.height=r.style.width=Math.max(s.width,s.height)+"px",n.appendChild(r)),l.type){case"center":r.style.top=s.height/2-r.offsetHeight/2+"px",r.style.left=s.width/2-r.offsetWidth/2+"px";break;default:r.style.top=(a.pageY-s.top-r.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",r.style.left=(a.pageX-s.left-r.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return r.style.backgroundColor=l.color,r.className="waves-ripple z-active",!1}}return t[i]?t[i].removeHandle=a:t[i]={removeHandle:a},a}var n={bind:function(t,e){t.addEventListener("click",l(t,e),!1)},update:function(t,e){t.removeEventListener("click",t[i].removeHandle,!1),t.addEventListener("click",l(t,e),!1)},unbind:function(t){t.removeEventListener("click",t[i].removeHandle,!1),t[i]=null,delete t[i]}},s=function(t){t.directive("waves",n)};window.Vue&&(window.waves=n,Vue.use(s)),n.install=s;e["a"]=n},"6d00":function(t,e,a){},"6fad":function(t,e,a){"use strict";a("b2f5")},7309:function(t,e,a){"use strict";a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return r}));var i=a("b775");function l(t){return Object(i["a"])({url:"/api/script/runScript",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/api/script/toScript",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/api/script/apiNameTips",method:"get",params:t})}function r(t){return Object(i["a"])({url:"/api/script/codeTips",method:"get",params:t})}},"74ec":function(t,e,a){},"8cf7":function(t,e,a){},"8d41":function(t,e,a){},b2f5:function(t,e,a){},b36c:function(t,e,a){"use strict";a.r(e),a.d(e,"listPage",(function(){return l})),a.d(e,"list",(function(){return n})),a.d(e,"getById",(function(){return s})),a.d(e,"update",(function(){return r})),a.d(e,"add",(function(){return o})),a.d(e,"deleted",(function(){return c}));var i=a("b775");function l(t){return Object(i["a"])({url:"/api/apiTestCase/listPage",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/api/apiTestCase/list",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/api/apiTestCase/getById?id="+t,method:"get"})}function r(t){return Object(i["a"])({url:"/api/apiTestCase/update",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/api/apiTestCase/add",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/api/apiTestCase/delete",method:"post",headers:{"Content-Type":"application/json"},data:t})}},b86e:function(t,e,a){"use strict";a("74ec")},bdea:function(t,e,a){},d6b9:function(t,e,a){"use strict";a("6d00")},d7b2:function(t,e,a){},e33a:function(t,e,a){"use strict";a("d7b2")},eeac:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"策略名称"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"策略描述"},model:{value:t.listQuery.desc,callback:function(e){t.$set(t.listQuery,"desc",e)},expression:"listQuery.desc"}}),t._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"类型"},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l(t.typeList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"执行策略"},model:{value:t.listQuery.strategy,callback:function(e){t.$set(t.listQuery,"strategy",e)},expression:"listQuery.strategy"}},t._l(t.strategyList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),a("el-select",{staticClass:"filter-item",attrs:{clearable:"",filterable:"",placeholder:"所属项目"},model:{value:t.listQuery.projectId,callback:function(e){t.$set(t.listQuery,"projectId",e)},expression:"listQuery.projectId"}},t._l(t.projectList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.fetchData}},[t._v("\n      搜索\n    ")]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("\n      添加\n    ")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"项目名称",align:"center",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.projectName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"策略名称",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"策略描述",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.desc))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("typeFilter")(e.row.type)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"执行策略",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("strategyFilter")(e.row.strategy)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"任务执行cron",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.jobCron))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"是否启用",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#00A854","active-text":"启用","active-value":1,"inactive-color":"#F04134","inactive-text":"停用","inactive-value":0},on:{change:function(a){return t.changeSwitch(e.row)}},model:{value:e.row.isAvailable,callback:function(a){t.$set(e.row,"isAvailable",a)},expression:"scope.row.isAvailable"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建用户",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.createUsername)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"下次触发时间",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"bottom",width:"160"},on:{show:function(a){return t.nextTriggerTime(e.row)}}},[a("h5",{staticStyle:{"text-align":"center"},domProps:{innerHTML:t._s(t.triggerNextTimes)}}),t._v(" "),a("el-button",{attrs:{slot:"reference",size:"small"},slot:"reference"},[t._v("查看")])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"执行状态",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(t._f("statusFilter")(a.status)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{cursor:"default"}},[a("span",[t._v("操作")]),t._v(" "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[3===i.type?a("el-dropdown-item",{nativeOn:{click:function(e){return t.runScript(i)}}},[t._v("测试脚本")]):t._e(),t._v(" "),1===i.strategy?a("el-dropdown-item",{nativeOn:{click:function(e){return t.trigger(i)}}},[t._v("执行一次")]):t._e(),t._v(" "),2===i.strategy?a("el-dropdown-item",{nativeOn:{click:function(e){return t.runPressure(i)}}},[t._v("压测")]):t._e(),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(e){return t.toLogView(i)}}},[t._v("查询日志")]),t._v(" "),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(e){return t.handleUpdate(i)}}},[t._v("编辑")]),t._v(" "),a("el-dropdown-item",{nativeOn:{click:function(e){return t.handleDelete(i)}}},[t._v("删除")])],1)],1)]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.pageNo,limit:t.listQuery.pageSize},on:{"update:page":function(e){return t.$set(t.listQuery,"pageNo",e)},"update:limit":function(e){return t.$set(t.listQuery,"pageSize",e)},pagination:t.fetchData}}),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"1000px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"110px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"策略名称",prop:"name"}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入名称"},model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name",e)},expression:"temp.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"策略描述",prop:"desc"}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入描述"},model:{value:t.temp.desc,callback:function(e){t.$set(t.temp,"desc",e)},expression:"temp.desc"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属项目",prop:"projectId"}},[a("el-select",{staticClass:"filter-item",attrs:{filterable:"",placeholder:"请选择"},on:{change:t.loadTestCase},model:{value:t.temp.projectId,callback:function(e){t.$set(t.temp,"projectId",e)},expression:"temp.projectId"}},t._l(t.projectList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.temp.type,callback:function(e){t.$set(t.temp,"type",e)},expression:"temp.type"}},t._l(t.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value},on:{change:t.changeType}})})),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"执行策略",prop:"strategy"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.temp.strategy,callback:function(e){t.$set(t.temp,"strategy",e)},expression:"temp.strategy"}},t._l(t.strategyList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),2===t.temp.strategy?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"线程数",prop:"threadCount"}},[a("el-input-number",{attrs:{min:1,max:1e3,size:"medium"},model:{value:t.temp.threadCount,callback:function(e){t.$set(t.temp,"threadCount",e)},expression:"temp.threadCount"}})],1)],1):a("el-col",{attrs:{span:8}},[a("el-dialog",{attrs:{title:"提示",visible:t.showCronBox,width:"60%","append-to-body":""},on:{"update:visible":function(e){t.showCronBox=e}}},[a("cron",{attrs:{year:!1},model:{value:t.temp.jobCron,callback:function(e){t.$set(t.temp,"jobCron",e)},expression:"temp.jobCron"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showCronBox=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showCronBox=!1}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"任务执行CRON",prop:"jobCron"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入Cron表达式"},model:{value:t.temp.jobCron,callback:function(e){t.$set(t.temp,"jobCron",e)},expression:"temp.jobCron"}},[t.showCronBox?a("el-button",{attrs:{slot:"append",icon:"el-icon-open",title:"关闭图形配置"},on:{click:function(e){t.showCronBox=!1}},slot:"append"}):a("el-button",{attrs:{slot:"append",icon:"el-icon-turn-off",title:"打开图形配置"},on:{click:function(e){t.showCronBox=!0}},slot:"append"})],1)],1)],1)],1),t._v(" "),2===t.temp.strategy?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"压测类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.threadStrategy.type,callback:function(e){t.$set(t.threadStrategy,"type",e)},expression:"threadStrategy.type"}},t._l(t.strategyTypeList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(" "),1===t.threadStrategy.type?a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"压测时间(ms)"}},[a("el-input-number",{attrs:{min:1e3},model:{value:t.threadStrategy.timeInMillis,callback:function(e){t.$set(t.threadStrategy,"timeInMillis",e)},expression:"threadStrategy.timeInMillis"}})],1)],1):a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"执行多少次"}},[a("el-input-number",{attrs:{min:1,max:9999999},model:{value:t.threadStrategy.loopCount,callback:function(e){t.$set(t.threadStrategy,"loopCount",e)},expression:"threadStrategy.loopCount"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"并发间隔(ms)"}},[a("el-input-number",{attrs:{min:-1},model:{value:t.threadStrategy.intervalInMillis,callback:function(e){t.$set(t.threadStrategy,"intervalInMillis",e)},expression:"threadStrategy.intervalInMillis"}})],1)],1)],1):t._e(),t._v(" "),2===t.temp.type?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"指定case",prop:"caseIds"}},[a("el-select",{staticClass:"filter-item",attrs:{multiple:"",clearable:"",filterable:"",placeholder:"请选择"},model:{value:t.temp.caseIds,callback:function(e){t.$set(t.temp,"caseIds",e)},expression:"temp.caseIds"}},t._l(t.testCaseList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.caseName,value:t.id}})})),1)],1)],1)],1):t._e()],1),t._v(" "),3===t.temp.type?a("div",{staticStyle:{color:"#606266","font-size":"14px","margin-bottom":"15px","font-weight":"bold"}},[t._v("自定义脚本：")]):t._e(),t._v(" "),3===t.temp.type?a("javascript-editor",{ref:"scriptEditor",model:{value:t.temp.script,callback:function(e){t.$set(t.temp,"script",e)},expression:"temp.script"}}):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        取消\n      ")]),t._v(" "),3===t.temp.type?a("el-button",{on:{click:t.formTestApi}},[t._v("\n        测试脚本\n      ")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("\n        确认\n      ")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"压测结果",visible:t.resultVisible},on:{"update:visible":function(e){t.resultVisible=e}}},[a("div",[a("el-form-item",{attrs:{label:"refLogId"}},[a("el-input",{model:{value:t.triggerData.refLogId,callback:function(e){t.$set(t.triggerData,"refLogId",e)},expression:"triggerData.refLogId"}})],1)],1),t._v(" "),null!=t.pressureData?a("div",[t._v("\n      压测结果: "),a("br"),t._v(t._s(JSON.stringify(t.pressureData))+"\n    ")]):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.queryResultData}},[t._v("查询结果")])],1)]),t._v(" "),a("script-execute",{ref:"scriptExecute"})],1)},l=[],n=a("5530"),s=(a("96cf"),a("1da1")),r=a("24d2"),o=a("fa8c"),c=a("333d"),u=a("f6c2"),p=a("45d1"),d=a("6724"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cron",attrs:{val:t.value_}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"秒",name:"s"}},[a("second-and-minute",{attrs:{lable:"秒"},model:{value:t.sVal,callback:function(e){t.sVal=e},expression:"sVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"分",name:"m"}},[a("second-and-minute",{attrs:{lable:"分"},model:{value:t.mVal,callback:function(e){t.mVal=e},expression:"mVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"时",name:"h"}},[a("hour",{attrs:{lable:"时"},model:{value:t.hVal,callback:function(e){t.hVal=e},expression:"hVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"日",name:"d"}},[a("day",{attrs:{lable:"日"},model:{value:t.dVal,callback:function(e){t.dVal=e},expression:"dVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"月",name:"month"}},[a("month",{attrs:{lable:"月"},model:{value:t.monthVal,callback:function(e){t.monthVal=e},expression:"monthVal"}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"周",name:"week"}},[a("week",{attrs:{lable:"周"},model:{value:t.weekVal,callback:function(e){t.weekVal=e},expression:"weekVal"}})],1),t._v(" "),t.year?a("el-tab-pane",{attrs:{label:"年",name:"year"}},[a("year",{attrs:{lable:"年"},model:{value:t.yearVal,callback:function(e){t.yearVal=e},expression:"yearVal"}})],1):t._e()],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,size:"mini",border:""}},[a("el-table-column",{attrs:{prop:"sVal",label:"秒",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mVal",label:"分",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"hVal",label:"时",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dVal",label:"日",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"monthVal",label:"月",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"weekVal",label:"周",width:"70"}}),t._v(" "),t.year?a("el-table-column",{attrs:{prop:"yearVal",label:"年"}}):t._e()],1)],1)},v=[],m=(a("28a5"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每"+t._s(t.lable))])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:59,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:59,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}}),t._v("\n    "+t._s(t.lable)+"\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("循环")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,max:59,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.start,callback:function(e){t.$set(t.loop,"start",e)},expression:"loop.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v(t._s(t.lable)+"开始，每")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:59,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.end,callback:function(e){t.$set(t.loop,"end",e)},expression:"loop.end"}}),t._v("\n    "+t._s(t.lable)+"执行一次\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定")]),t._v(" "),a("el-checkbox-group",{model:{value:t.appoint,callback:function(e){t.appoint=e},expression:"appoint"}},t._l(6,(function(e){return a("div",{key:e,staticStyle:{"margin-left":"10px","line-height":"25px"}},t._l(10,(function(i){return a("el-checkbox",{key:i,attrs:{label:e-1+""+(i-1)},on:{change:function(e){t.type="4"}}})})),1)})),0)],1)])}),f=[],y=(a("a481"),{props:{value:{type:String,default:"*"},lable:{type:String}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":t.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":t.push(this.appoint.join(","));break;case"6":t.push("".concat(0===this.last?"":this.last,"L"));break;default:t.push("?");break}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}}}),b=y,g=(a("49a6"),a("2877")),_=Object(g["a"])(b,m,f,!1,null,null,null),x=_.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每时")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,max:23,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:23,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}}),t._v("\n    时\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("循环")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:0,max:23,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.start,callback:function(e){t.$set(t.loop,"start",e)},expression:"loop.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("时开始，每")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:23,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.end,callback:function(e){t.$set(t.loop,"end",e)},expression:"loop.end"}}),t._v("\n    时执行一次\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定")]),t._v(" "),a("el-checkbox-group",{model:{value:t.appoint,callback:function(e){t.appoint=e},expression:"appoint"}},t._l(3,(function(e){return a("div",{key:e,staticStyle:{"margin-left":"10px","line-height":"25px"}},t._l(10,(function(i){return a("span",{key:i,staticStyle:{display:"inline-block","margin-right":"30px"}},[parseInt(e-1+""+(i-1))<24?a("el-checkbox",{key:i,attrs:{label:e-1+""+(i-1)},on:{change:function(e){t.type="4"}}}):t._e()],1)})),0)})),0)],1)])},w=[],S={props:{value:{type:String,default:"*"}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":t.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":t.push(this.appoint.join(","));break;case"6":t.push("".concat(0===this.last?"":this.last,"L"));break;default:t.push("?");break}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}}},V=S,j=(a("e33a"),Object(g["a"])(V,k,w,!1,null,null,null)),O=j.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每日")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("不指定")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:31,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:31,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}}),t._v("\n    日\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("循环")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:31,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.start,callback:function(e){t.$set(t.loop,"start",e)},expression:"loop.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("日开始，每")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:31,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.end,callback:function(e){t.$set(t.loop,"end",e)},expression:"loop.end"}}),t._v("\n    日执行一次\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"8",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("工作日")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("本月")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="8"}},model:{value:t.work,callback:function(e){t.work=e},expression:"work"}}),t._v("\n    号，最近的工作日\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"6",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("本月最后一天")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定")]),t._v(" "),a("el-checkbox-group",{model:{value:t.appoint,callback:function(e){t.appoint=e},expression:"appoint"}},t._l(4,(function(e){return a("div",{key:e,staticStyle:{"margin-left":"10px","line-height":"25px"}},t._l(10,(function(i){return a("span",{key:i},[parseInt(e-1+""+(i-1))<32&&(1!==e||1!==i)?a("el-checkbox",{staticStyle:{"margin-right":"30px"},attrs:{label:e-1+""+(i-1)},on:{change:function(e){t.type="4"}}}):t._e()],1)})),0)})),0)],1)])},C=[],z={props:{value:{type:String,default:"?"}},data:function(){return{type:"5",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":t.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":t.push(this.appoint.join(","));break;case"6":t.push("".concat(0===this.last?"":this.last,"L"));break;case"7":t.push("".concat(this.week.start,"#").concat(this.week.end));break;case"8":t.push("".concat(this.work,"W"));break;default:t.push("?");break}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}}},I=z,L=(a("d6b9"),Object(g["a"])(I,$,C,!1,null,null,null)),T=L.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每月")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("不指定")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:12,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:12,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}}),t._v("\n    月\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("循环")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:12,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.start,callback:function(e){t.$set(t.loop,"start",e)},expression:"loop.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("月开始，每")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:12,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.end,callback:function(e){t.$set(t.loop,"end",e)},expression:"loop.end"}}),t._v("\n    月执行一次\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定")]),t._v(" "),a("el-checkbox-group",{staticStyle:{"margin-left":"0px","line-height":"25px"},model:{value:t.appoint,callback:function(e){t.appoint=e},expression:"appoint"}},t._l(12,(function(e){return a("el-checkbox",{key:e,attrs:{label:e},on:{change:function(e){t.type="4"}}})})),1)],1)])},E=[],N={props:{value:{type:String,default:"*"}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":t.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":t.push(this.appoint.join(","));break;case"6":t.push("".concat(0===this.last?"":this.last,"L"));break;default:t.push("?");break}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}}},M=N,F=(a("3b6f"),Object(g["a"])(M,D,E,!1,null,null,null)),Q=F.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每周")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("不指定")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从星期")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至星期")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2,max:7,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}})],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"3",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("循环")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从星期")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.start,callback:function(e){t.$set(t.loop,"start",e)},expression:"loop.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("开始，每")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="3"}},model:{value:t.loop.end,callback:function(e){t.$set(t.loop,"end",e)},expression:"loop.end"}}),t._v("\n    天执行一次\n  ")],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"7",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定周")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("本月第")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:4,size:"mini"},on:{change:function(e){t.type="7"}},model:{value:t.week.start,callback:function(e){t.$set(t.week,"start",e)},expression:"week.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("周，星期")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="7"}},model:{value:t.week.end,callback:function(e){t.$set(t.week,"end",e)},expression:"week.end"}})],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"6",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("本月最后一个")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("星期")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:1,max:7,size:"mini"},on:{change:function(e){t.type="6"}},model:{value:t.last,callback:function(e){t.last=e},expression:"last"}})],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"4",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("指定")]),t._v(" "),a("el-checkbox-group",{staticStyle:{"margin-left":"50px","line-height":"25px"},model:{value:t.appoint,callback:function(e){t.appoint=e},expression:"appoint"}},t._l(7,(function(e){return a("el-checkbox",{key:e,attrs:{label:e},on:{change:function(e){t.type="4"}}})})),1)],1)])},q=[],A={props:{value:{type:String,default:"*"}},data:function(){return{type:"1",cycle:{start:0,end:0},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":t.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":t.push(this.appoint.join(","));break;case"6":t.push("".concat(0===this.last?"":this.last,"L"));break;case"7":t.push("".concat(this.week.start,"#").concat(this.week.end));break;default:t.push("?");break}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}}},B=A,J=(a("591a"),Object(g["a"])(B,W,q,!1,null,null,null)),U=J.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{val:t.value_}},[a("div",[a("el-radio",{attrs:{label:"1",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("每年")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"5",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("不指定")])],1),t._v(" "),a("div",[a("el-radio",{attrs:{label:"2",size:"mini",border:""},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[t._v("周期")]),t._v(" "),a("span",{staticStyle:{"margin-left":"10px","margin-right":"5px"}},[t._v("从")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2e3,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.start,callback:function(e){t.$set(t.cycle,"start",e)},expression:"cycle.start"}}),t._v(" "),a("span",{staticStyle:{"margin-left":"5px","margin-right":"5px"}},[t._v("至")]),t._v(" "),a("el-input-number",{staticStyle:{width:"100px"},attrs:{min:2e3,size:"mini"},on:{change:function(e){t.type="2"}},model:{value:t.cycle.end,callback:function(e){t.$set(t.cycle,"end",e)},expression:"cycle.end"}}),t._v("\n    年\n  ")],1)])},R=[],H={props:{value:{type:String,default:"*"}},data:function(){var t=(new Date).getFullYear();return{type:"1",cycle:{start:t,end:t},loop:{start:0,end:0},week:{start:0,end:0},work:0,last:0,appoint:[]}},computed:{value_:function(){var t=[];switch(this.type){case"1":t.push("*");break;case"2":t.push("".concat(this.cycle.start,"-").concat(this.cycle.end));break;case"3":t.push("".concat(this.loop.start,"/").concat(this.loop.end));break;case"4":t.push(this.appoint.join(","));break;case"6":t.push("".concat(0===this.last?"":this.last,"L"));break;default:t.push("?");break}return this.$emit("input",t.join("")),t.join("")}},watch:{value:function(t,e){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){this.value&&("?"===this.value?this.type="5":-1!==this.value.indexOf("-")?2===this.value.split("-").length&&(this.type="2",this.cycle.start=this.value.split("-")[0],this.cycle.end=this.value.split("-")[1]):-1!==this.value.indexOf("/")?2===this.value.split("/").length&&(this.type="3",this.loop.start=this.value.split("/")[0],this.loop.end=this.value.split("/")[1]):-1!==this.value.indexOf("*")?this.type="1":-1!==this.value.indexOf("L")?(this.type="6",this.last=this.value.replace("L","")):-1!==this.value.indexOf("#")?2===this.value.split("#").length&&(this.type="7",this.week.start=this.value.split("#")[0],this.week.end=this.value.split("#")[1]):-1!==this.value.indexOf("W")?(this.type="8",this.work=this.value.replace("W","")):(this.type="4",this.appoint=this.value.split(",")))}}},Y=H,X=(a("6fad"),Object(g["a"])(Y,P,R,!1,null,null,null)),G=X.exports,K={components:{SecondAndMinute:x,hour:O,day:T,month:Q,week:U,year:G},props:{value:{type:String},year:{type:Boolean,default:!0}},data:function(){return{activeName:"s",sVal:"",mVal:"",hVal:"",dVal:"",monthVal:"",weekVal:"",yearVal:""}},computed:{tableData:function(){return[{sVal:this.sVal,mVal:this.mVal,hVal:this.hVal,dVal:this.dVal,monthVal:this.monthVal,weekVal:this.weekVal,yearVal:this.yearVal}]},value_:function(){return this.dVal||this.weekVal?("?"===this.dVal&&"?"===this.weekVal&&this.$message.error("日期与星期不可以同时为“不指定”"),"?"!==this.dVal&&"?"!==this.weekVal&&this.$message.error("日期与星期必须有一个为“不指定”"),t=this.year?"".concat(this.sVal," ").concat(this.mVal," ").concat(this.hVal," ").concat(this.dVal," ").concat(this.monthVal," ").concat(this.weekVal," ").concat(this.yearVal):"".concat(this.sVal," ").concat(this.mVal," ").concat(this.hVal," ").concat(this.dVal," ").concat(this.monthVal," ").concat(this.weekVal),t!==this.value&&this.$emit("input",t),t):"";var t}},watch:{value:function(t,e){this.updateVal()}},created:function(){this.updateVal()},methods:{updateVal:function(){if(this.value){var t=this.value.split(" ");this.sVal=t[0],this.mVal=t[1],this.hVal=t[2],this.dVal=t[3],this.monthVal=t[4],this.weekVal=t[5],this.year&&(this.yearVal=t[6])}}}},Z=K,tt=(a("b86e"),Object(g["a"])(Z,h,v,!1,null,null,null)),et=tt.exports,at=a("b36c"),it=a("b775");function lt(t){return Object(it["a"])({url:"/api/apiExecuteStrategy/listPage",method:"get",params:t})}function nt(t){return Object(it["a"])({url:"/api/apiExecuteStrategy/runStrategy?id="+t,method:"get"})}function st(t){return Object(it["a"])({url:"/api/apiExecuteStrategy/queryStrategyById?id="+t,method:"get"})}function rt(t){return Object(it["a"])({url:"/api/apiExecuteStrategy/update",method:"post",data:t})}function ot(t){return Object(it["a"])({url:"/api/apiExecuteStrategy/add",method:"post",data:t})}function ct(t){return Object(it["a"])({url:"/api/apiExecuteStrategy/delete",method:"post",headers:{"Content-Type":"application/json"},data:t})}function ut(t){return Object(it["a"])({url:"/api/apiExecuteStrategy/nextTriggerTime?cron="+t,method:"get"})}var pt={name:"Strategy",components:{Pagination:c["a"],JavascriptEditor:u["a"],ScriptExecute:p["a"],Cron:et},directives:{waves:d["a"]},filters:{typeFilter:function(t){var e={1:"所有case",2:"指定case",3:"自定义脚本"};return e[t]},strategyFilter:function(t){var e={1:"定时任务",2:"压测"};return e[t]},statusFilter:function(t){var e={1:"部分成功",2:"全部成功",3:"失败"};return e[t]}},data:function(){return{list:null,canUpdate:!0,listLoading:!0,total:0,listQuery:{pageNo:1,pageSize:10,projectId:null,name:"",desc:"",type:null,strategy:null},projectList:[],testCaseList:[],triggerData:{id:null,row:null,refLogId:null},triggerNextTimes:"",pressureData:null,resultVisible:!1,dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑策略",create:"新增策略"},typeList:[{value:1,label:"所有case"},{value:2,label:"指定case"},{value:3,label:"自定义脚本"}],strategyList:[{value:1,label:"定时任务"},{value:2,label:"压测"}],rules:{projectId:[{required:!0,message:"请选择项目",trigger:"change"}],name:[{required:!0,message:"策略名称不能为空",trigger:"blur"}],desc:[{required:!0,message:"描述不能为空",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],strategy:[{required:!0,message:"请选择策略",trigger:"change"}]},temp:{id:void 0,projectId:null,name:"",desc:"",type:null,strategy:1,jobCron:null,threadCount:null,threadStrategyJson:null,script:void 0,isAvailable:0,caseIds:[]},threadStrategy:{type:1,loopCount:null,timeInMillis:null,intervalInMillis:-1},strategyTypeList:[{value:1,label:"按时长"},{value:2,label:"按次数"}],visible:!0,showCronBox:!1}},watch:{},created:function(){this.init()},methods:{init:function(){var t=this;this.fetchData(),Object(r["list"])({isAvailable:1}).then((function(e){t.projectList=e.data||[]}))},fetchData:function(){var t=this;this.canUpdate=!0,this.listLoading=!0,lt(this.listQuery).then((function(e){t.total=e.total,t.list=e.data,t.listLoading=!1}))},loadTestCase:function(){var t=this;this.temp.projectId?at["list"]({isAvailable:1,projectId:this.temp.projectId}).then((function(e){t.testCaseList=e.data||[]})):(this.temp.caseIds=[],this.testCaseList=[]),this.$refs.scriptEditor&&this.$refs.scriptEditor.reloadTips(this.temp.projectId)},resetTemp:function(){this.temp={id:void 0,projectId:null,name:"",desc:"",type:null,strategy:1,jobCron:null,threadCount:null,threadStrategyJson:null,script:void 0,isAvailable:0,caseIds:[]},this.threadStrategy={type:1,loopCount:null,timeInMillis:null,intervalInMillis:-1}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},createData:function(){var t=this;this.canUpdate&&this.$refs["dataForm"].validate((function(e){e&&(t.temp.threadStrategyJson=JSON.stringify(t.threadStrategy||"{}"),t.canUpdate=!1,ot(t.temp).then((function(){t.fetchData(),t.dialogFormVisible=!1,t.$notify({title:"Success",message:"创建成功",type:"success",duration:2e3})})).catch((function(){t.canUpdate=!0})))}))},handleUpdate:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,i,l,s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.resetTemp(),2!==e.type){t.next=9;break}return t.next=4,st(e.id);case 4:i=t.sent,l=i.data,a=l||e,t.next=10;break;case 9:a=Object.assign({},e);case 10:if(a.threadStrategyJson)try{s=JSON.parse(a.threadStrategyJson||"{}"),s.type?s.type=parseInt(s.type+""):s.type=1,s.loopCount?s.loopCount=parseInt(s.loopCount+""):s.loopCount=null,s.timeInMillis?s.timeInMillis=parseInt(s.timeInMillis+""):s.timeInMillis=null,s.intervalInMillis?s.intervalInMillis=parseInt(s.intervalInMillis+""):s.intervalInMillis=-1,this.threadStrategy=Object(n["a"])({},s)}catch(o){console.log(o)}this.temp=a,this.loadTestCase(),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){r.$refs["dataForm"].clearValidate()}));case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),changeSwitch:function(t){var e=this;rt({id:t.id,isAvailable:t.isAvailable}).then((function(){e.fetchData(),e.$notify({title:"Success",message:"操作成功",type:"success",duration:2e3})})).catch((function(){e.fetchData()}))},updateData:function(){var t=this;this.canUpdate&&this.$refs["dataForm"].validate((function(e){e&&(t.temp.threadStrategyJson=JSON.stringify(t.threadStrategy||"{}"),t.canUpdate=!1,rt(t.temp).then((function(){t.canUpdate=!0,t.fetchData(),t.dialogFormVisible=!1,t.$notify({title:"Success",message:"修改成功",type:"success",duration:2e3})})).catch((function(){t.canUpdate=!0})))}))},handleDelete:function(t){var e=this;this.$confirm("确定删除吗？").then((function(){ct(t.id).then((function(t){e.fetchData(),e.$notify({title:"Success",message:"删除成功",type:"success",duration:2e3})}))}))},handleClose:function(t){this.temp.id?t():this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},changeType:function(){2===this.temp.type&&this.loadTestCase()},formTestApi:function(){var t=this;this.$refs["dataForm"].validate((function(e){e&&t.runScript(t.temp)}))},toLogView:function(t){this.$router.push({name:"Logs",query:{executeStrategyId:t.id}})},nextTriggerTime:function(t){var e=this;ut(t.jobCron).then((function(t){var a=t.data;e.triggerNextTimes=a.join("<br>")}))},runScript:function(t){this.$refs.scriptExecute.show(t.projectId,t.script||"")},trigger:function(t){var e=this,a=Object(n["a"])({},t);this.triggerData={id:t.id,row:a,refLogId:null},nt(t.id).then((function(t){var i=t.data;e.triggerData={id:a.id,row:a,refLogId:i},e.$notify({title:"Success",message:"触发成功",type:"success",duration:2e3})}))},runPressure:function(t){this.trigger(t),this.resultVisible=!0},queryResultData:function(){var t=this,e=this.triggerData.id,a=this.triggerData.refLogId;o["b"](e,a).then((function(e){t.pressureData=e.data||{}}))}}},dt=pt,ht=Object(g["a"])(dt,i,l,!1,null,null,null);e["default"]=ht.exports},fa8c:function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return n}));var i=a("b775");function l(t){return Object(i["a"])({url:"/api/apiLog/listPage",method:"get",params:t})}function n(t,e){return Object(i["a"])({url:"/api/apiLog/pressureResult?strategyId="+t+"&logId="+(e||""),method:"get"})}}}]);